<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kkj.board.member">
    <sql id="columns">
        id,
        password,
        name,
        gender,
        email,
        authority,
        login_count as loginCount,
        recommend_count as recommendCount,
        grade,
        reg_dt as regDt,
        mod_dt as modDt
    </sql>
    
    <update id="doUpdate" parameterType="MemberVO">
    UPDATE member
		SET
   			password = #{password},
   			email = #{email},
   			authority = #{authority},
   			login_count = #{loginCount},
   			recommend_count = #{recommendCount},
   			grade = #{grade},
   			mod_dt = SYSDATE
		WHERE
        	id = #{id}
    </update>
    
    <delete id="doDelete" parameterType="MemberVO">
    Delete From member
	Where
        id = #{id}
    AND password = #{password}
    </delete>
    
    <insert id="doInsert" parameterType="MemberVO">
    	Insert into member(
    		id,
	        password,
	        name,
	        gender,
	        email,
	        authority,
	        login_count,
	        recommend_count,
	        grade,
	        reg_dt,
	        mod_dt
    	) Values (
    		#{id},
    		#{password},
    		#{name},
    		#{gender},
    		#{email},
    		#{authority},
    		#{loginCount},
    		#{recommendCount},
    		#{grade},
    		SYSDATE,
    		TO_DATE(#{modDt},'MM/DD')
    	)
    </insert>
    
    <select id="doSelectList" resultType="MemberVO">
    	Select
    		<include refid="columns"/>
    	From
    		member
    </select>
    
    <select id="doSelectOne" parameterType="MemberVO" resultType="MemberVO">
    	Select 
    		<include refid="columns"/>
    	From
    		member
    	Where
    		id = #{id}    
    </select>
    
</mapper>